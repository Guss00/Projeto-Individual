<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="../assets/icon/favicon2.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Letras em Ação | Edição do Livro</title>

    <link rel="stylesheet" href="../CSS/dasboard.css" />
    <link rel="stylesheet" href="../CSS/navbarDash.css">

    <link rel="icon" type="image/png" href="../assests/img/imagenloginho.png"/>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
</head>

<body>
  <div class="dash-right">
    <div class="header">
      <div class="container">
        <div class="titulo">
          <img src="../assests/img/Logo.jpeg" alt="" />
        </div>
        <ul class="navbar">
          <li>
            <a href="dashboard.html" style="margin-left: -25rem">Dashboard</a>
          </li>
          <li>
            <a href="comunidade.html" style="margin-left: -20rem"
              >Comunidade</a
            >
          </li>
          <li style="margin-left: -15rem">
            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
              <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3Zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/>
            </svg> Usuario&nbsp; <span id="b_usuario">usuário</span>
          </li>
          <li style="margin-right: -8rem">
            <a onclick="Sair()">Sair&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-box-arrow-left" viewBox="0 0 16 16">
              <path fill-rule="evenodd" d="M6 12.5a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v2a.5.5 0 0 1-1 0v-2A1.5 1.5 0 0 1 6.5 2h8A1.5 1.5 0 0 1 16 3.5v9a1.5 1.5 0 0 1-1.5 1.5h-8A1.5 1.5 0 0 1 5 12.5v-2a.5.5 0 0 1 1 0v2z"/>
              <path fill-rule="evenodd" d="M.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L1.707 7.5H10.5a.5.5 0 0 1 0 1H1.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
            </svg></a>
          </li>
        </ul>
      </div>
    </div>

    <div class="ajudinha"></div>
    
            <div class="avisos">
                <div class="container">
                  <div class="div-form">
                      <h1>Editar o Livro</h1>
                        <label>
                            <span>Título:</span>
                            <br>
                            <input id="input_titulo" maxlength="100" type="text" style="color: rgb(0, 0, 0)">
                        </label>
                        <label>
                        <span>Gênero do Livro:</span>
                        <br>
                        <select name="genero" id="genero">
                            <option value="null">Nenhum</option>
                            <option value="Ficção científica">Ficção científica</option>
                            <option value="Romance">Romance</option>
                            <option value="Suspense">Suspense</option>
                            <option value="Terror">Terror</option>
                            <option value="Aventura">Aventura</option>
                            <option value="Crime e mistério">Crime e mistério</option>
                            <option value="História">História</option>
                            <option value="Biografia">Biografia</option>
                            <option value="Autobiografia">Autobiografia</option>
                            <option value="Poesia">Poesia</option>
                            <option value="Contos">Contos</option>
                            <option value="Fantasia">Fantasia</option>
                            <option value="Mitologia">Mitologia</option>
                            <option value="Literatura Infantil e Juvenil">
                              Literatura Infantil e Juvenil
                            </option>
                            <option value="Drama">Drama</option>
                            <option value="Comédia">Comédia</option>
                            <option value="Ensaio">Ensaio</option>
                            <option value="Crônica">Crônica</option>
                            <option value="Guias de Viagem">Guias de Viagem</option>
                            <option value="Livros de autoajuda e desenvolvimento pessoal">
                              Livros de autoajuda e desenvolvimento pessoal
                            </option>
                          </select>
                        </label>
                        <br>
                        <button onclick="editar()">Editar <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                          <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                        </svg></button>
                        <button><a href="biblioteca.html">Cancelar</a></button>
                    </div>


                </div>
            </div>
    </div>
</body>

</html>

<script>

input_titulo.value = sessionStorage.getItem("ID_POSTAGEM_EDITANDO")

    function Sair() {
    sessionStorage.clear();
    window.location = "../login.html";
  }

    function editar() {
  var idUsuario = sessionStorage.getItem("ID_USUARIO");

  fetch(`/biblioteca/editar/${idUsuario}`, {
    method: "put",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      titulo: input_titulo.value,
      genero: genero.value,
      nomeAntigo: sessionStorage.getItem("ID_POSTAGEM_EDITANDO")
    })
  })
    .then(function (resposta) {
      if (resposta.ok) {
        window.location = "biblioteca.html";
      } else if (resposta.status == 404) {
      } else {
        throw (
          "Houve um erro ao tentar atualizar a postagem! Código da resposta: " +
          resposta.status
        );
      }
    })
    .catch(function (erro) {
      console.log("#ERRO: ", erro);
    });
}



</script>